<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Mercanc√≠a</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üì¶ Sistema de Gesti√≥n de Mercanc√≠a</h1>
        </header>

        <!-- Men√∫ Principal -->
        <nav id="mainMenu" class="main-menu">
            <button class="menu-btn" onclick="showSection('registro')">
                <span class="icon">‚ûï</span>
                <span class="text">Registro de Mercanc√≠a</span>
            </button>
            <button class="menu-btn" onclick="showSection('consulta')">
                <span class="icon">üîç</span>
                <span class="text">Consulta de Mercanc√≠a</span>
            </button>
            <button class="menu-btn" onclick="showSection('venta')">
                <span class="icon">üí∞</span>
                <span class="text">Venta</span>
            </button>
            <button class="menu-btn" onclick="showSection('historial-registro')">
                <span class="icon">üìã</span>
                <span class="text">Historial de Registro</span>
            </button>
            <button class="menu-btn" onclick="showSection('historial-ventas')">
                <span class="icon">üìä</span>
                <span class="text">Historial de Ventas</span>
            </button>
        </nav>

        <!-- Secci√≥n: Registro de Mercanc√≠a -->
        <section id="registro" class="section hidden">
            <div class="section-header">
                <h2>Registro de Mercanc√≠a</h2>
                <button class="btn-secondary" onclick="showSection('mainMenu')">‚Üê Volver al Men√∫</button>
            </div>
            <form id="formRegistro" class="form">
                <div class="form-group">
                    <label for="nombre">Nombre de la Mercanc√≠a *</label>
                    <input type="text" id="nombre" name="nombre" required>
                </div>
                <div class="form-group">
                    <label for="descripcion">Descripci√≥n</label>
                    <textarea id="descripcion" name="descripcion" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="precio">Precio *</label>
                        <input type="number" id="precio" name="precio" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="cantidad">Cantidad *</label>
                        <input type="number" id="cantidad" name="cantidad" min="0" required>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Guardar Mercanc√≠a</button>
                    <button type="reset" class="btn-secondary">Limpiar Formulario</button>
                </div>
            </form>
            <div id="mensajeRegistro" class="mensaje hidden"></div>
        </section>

        <!-- Secci√≥n: Consulta de Mercanc√≠a -->
        <section id="consulta" class="section hidden">
            <div class="section-header">
                <h2>Consulta de Mercanc√≠a</h2>
                <button class="btn-secondary" onclick="showSection('mainMenu')">‚Üê Volver al Men√∫</button>
            </div>
            <div class="search-bar">
                <input type="text" id="buscarMercancia" placeholder="Buscar por nombre..." onkeyup="buscarMercancia()">
            </div>
            <div id="tablaMercancia" class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Descripci√≥n</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                            <th>Fecha Registro</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyMercancia">
                        <!-- Datos cargados din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Secci√≥n: Venta -->
        <section id="venta" class="section hidden">
            <div class="section-header">
                <h2>Registrar Venta</h2>
                <button class="btn-secondary" onclick="showSection('mainMenu')">‚Üê Volver al Men√∫</button>
            </div>
            <form id="formVenta" class="form">
                <div class="form-group">
                    <label for="mercanciaVenta">Seleccionar Mercanc√≠a *</label>
                    <select id="mercanciaVenta" name="mercanciaVenta" required onchange="actualizarInfoVenta()">
                        <option value="">-- Seleccione una mercanc√≠a --</option>
                    </select>
                </div>
                <div id="infoMercancia" class="info-box hidden">
                    <p><strong>Precio Unitario:</strong> <span id="precioUnitario">$0.00</span></p>
                    <p><strong>Stock Disponible:</strong> <span id="stockDisponible">0</span></p>
                </div>
                <div class="form-group">
                    <label for="cantidadVenta">Cantidad a Vender *</label>
                    <input type="number" id="cantidadVenta" name="cantidadVenta" min="1" required onchange="calcularTotal()">
                </div>
                <div class="info-box">
                    <p><strong>Total:</strong> <span id="totalVenta" class="total">$0.00</span></p>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Confirmar Venta</button>
                    <button type="reset" class="btn-secondary" onclick="resetFormVenta()">Limpiar</button>
                </div>
            </form>
            <div id="mensajeVenta" class="mensaje hidden"></div>
        </section>

        <!-- Secci√≥n: Historial de Registro -->
        <section id="historial-registro" class="section hidden">
            <div class="section-header">
                <h2>Historial de Registro de Mercanc√≠a</h2>
                <button class="btn-secondary" onclick="showSection('mainMenu')">‚Üê Volver al Men√∫</button>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Descripci√≥n</th>
                            <th>Precio</th>
                            <th>Cantidad</th>
                            <th>Fecha Registro</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyHistorialRegistro">
                        <!-- Datos cargados din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Secci√≥n: Historial de Ventas -->
        <section id="historial-ventas" class="section hidden">
            <div class="section-header">
                <h2>Historial de Ventas</h2>
                <button class="btn-secondary" onclick="showSection('mainMenu')">‚Üê Volver al Men√∫</button>
            </div>
            <div class="stats-box">
                <div class="stat-item">
                    <span class="stat-label">Total de Ventas:</span>
                    <span id="totalVentas" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Ingresos Totales:</span>
                    <span id="ingresosTotales" class="stat-value">$0.00</span>
                </div>
            </div>
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Mercanc√≠a</th>
                            <th>Cantidad Vendida</th>
                            <th>Precio Unitario</th>
                            <th>Total</th>
                            <th>Fecha Venta</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyHistorialVentas">
                        <!-- Datos cargados din√°micamente -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <script src="app.js" defer></script>
</body>
</html>
